{% load i18n %}

<!-- Native KT Metronic Modal -->
<div class="kt-modal" data-kt-modal="true" id="product-group-modal">
  <div class="kt-modal-content max-w-[500px] top-[10%]">

    <!-- Modal Header -->
    <div class="kt-modal-header">
      <h3 class="kt-modal-title">{{ object.name }}</h3>
      <button type="button" class="kt-modal-close" aria-label="Close modal" data-kt-modal-dismiss="#product-group-modal">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x" aria-hidden="true">
          <path d="M18 6 6 18"></path>
          <path d="m6 6 12 12"></path>
        </svg>
      </button>
    </div>

    <!-- Modal Body -->
    <div class="kt-modal-body">
      <div class="space-y-4">

        <!-- Header Info Card -->
        <div class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg">
          <div class="flex items-center justify-center size-10 bg-primary-light rounded-lg">
            <i class="ki-filled ki-folder text-primary text-lg"></i>
          </div>
          <div>
            <div class="font-semibold">{{ object.name }}</div>
            <div class="text-sm text-gray-600">{{ object.code }}</div>
          </div>
        </div>

        <!-- Status Row -->
        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
          <div class="flex items-center gap-2">
            <i class="ki-filled ki-information-2 text-muted-foreground"></i>
            <span class="text-sm font-medium">{% trans "Status" %}</span>
          </div>
          {% if object.is_active %}
            <span class="kt-badge kt-badge-success kt-badge-sm">
              <i class="ki-filled ki-check-circle"></i>
              {% trans "Active" %}
            </span>
          {% else %}
            <span class="kt-badge kt-badge-warning kt-badge-sm">
              <i class="ki-filled ki-information-2"></i>
              {% trans "Inactive" %}
            </span>
          {% endif %}
        </div>

        <!-- Parent Group (if exists) -->
        {% if object.parent %}
        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
          <div class="flex items-center gap-2">
            <i class="ki-filled ki-abstract-14 text-muted-foreground"></i>
            <span class="text-sm font-medium">{% trans "Parent Group" %}</span>
          </div>
          <span class="text-sm text-gray-700">{{ object.parent.name }}</span>
        </div>
        {% endif %}

        <!-- Description (if exists) -->
        {% if object.description %}
        <div class="p-3 bg-blue-50 rounded-lg">
          <div class="flex items-start gap-2 mb-2">
            <i class="ki-filled ki-note text-blue-600 mt-0.5"></i>
            <span class="text-sm font-medium text-blue-900">{% trans "Description" %}</span>
          </div>
          <p class="text-sm text-blue-800 pl-6">{{ object.description }}</p>
        </div>
        {% endif %}

        <!-- Child Groups (if exist) -->
        {% if object.children.exists %}
        <div class="p-3 bg-green-50 rounded-lg">
          <div class="flex items-center justify-between mb-3">
            <div class="flex items-center gap-2">
              <i class="ki-filled ki-element-11 text-green-600"></i>
              <span class="text-sm font-medium text-green-900">{% trans "Child Groups" %}</span>
            </div>
            <span class="kt-badge kt-badge-success kt-badge-xs">{{ object.children.count }}</span>
          </div>
          <div class="space-y-2 pl-6">
            {% for child in object.children.all|slice:":3" %}
            <div class="flex items-center justify-between text-sm">
              <span class="text-green-800">{{ child.name }}</span>
              <span class="font-mono text-xs text-green-600 bg-white px-2 py-0.5 rounded">{{ child.code }}</span>
            </div>
            {% endfor %}
            {% if object.children.count > 3 %}
            <div class="text-xs text-green-600 text-center pt-1">
              + {{ object.children.count|add:"-3" }} {% trans "more groups" %}
            </div>
            {% endif %}
          </div>
        </div>
        {% endif %}

        <!-- Created Date -->
        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
          <div class="flex items-center gap-2">
            <i class="ki-filled ki-calendar text-muted-foreground"></i>
            <span class="text-sm font-medium">{% trans "Created" %}</span>
          </div>
          <span class="text-sm text-gray-700">{{ object.created_at|date:"d.m.Y" }}</span>
        </div>

      </div>
    </div>

    <!-- Modal Footer -->
    <div class="kt-modal-footer">
      <div class="flex items-center gap-2 w-full">
        <button type="button" class="kt-btn kt-btn-secondary flex-1" data-kt-modal-dismiss="#product-group-modal">
          {% trans "Close" %}
        </button>
        <a href="{% url 'nomenclatures:product_groups_edit' object.pk %}" class="kt-btn kt-btn-primary flex-1">
          <i class="ki-filled ki-notepad-edit"></i>
          {% trans "Edit" %}
        </a>
      </div>
    </div>

  </div>
</div>