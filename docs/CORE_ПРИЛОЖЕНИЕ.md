# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ CORE –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ

## üéØ –ü—Ä–µ–≥–ª–µ–¥

**CORE –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ** –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—è –æ—Å–Ω–æ–≤–Ω–∞—Ç–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞ OptimaPOS - –±–∞–∑–æ–≤–∏ –º–æ–¥–µ–ª–∏, —É—Ç–∏–ª–∏—Ç–∏, –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏ –∏ —Å–ø–æ–¥–µ–ª–µ–Ω–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏, –æ—Ç –∫–æ–∏—Ç–æ –≤—Å–∏—á–∫–∏ –¥—Ä—É–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∑–∞–≤–∏—Å—è—Ç.

## üìã –°—ä–¥—ä—Ä–∂–∞–Ω–∏–µ

1. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
2. [–û—Å–Ω–æ–≤–Ω–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏](#–æ—Å–Ω–æ–≤–Ω–∏-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏)
3. [–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏](#–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏)
4. [Service Registry](#service-registry)
5. [–£—Ç–∏–ª–∏—Ç–∏](#—É—Ç–∏–ª–∏—Ç–∏)
6. [–ú–æ–¥–µ–ª–∏](#–º–æ–¥–µ–ª–∏)
7. [–ú–æ–¥–µ–ª–∏ –∑–∞ –ø–æ–ª–µ—Ç–∞](#–º–æ–¥–µ–ª–∏-–∑–∞-–ø–æ–ª–µ—Ç–∞)
8. [–î–µ—Å–µ—Ç–∏—á–Ω–∞ —Ç–æ—á–Ω–æ—Å—Ç](#–¥–µ—Å–µ—Ç–∏—á–Ω–∞-—Ç–æ—á–Ω–æ—Å—Ç)
9. [–®–∞–±–ª–æ–Ω–∏ –∑–∞ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ](#—à–∞–±–ª–æ–Ω–∏-–∑–∞-–∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ)
10. [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–∏ —Ç–æ—á–∫–∏](#–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–∏-—Ç–æ—á–∫–∏)

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
CORE –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ:
‚îú‚îÄ‚îÄ interfaces/              # Service Registry –∏ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏
‚îÇ   ‚îú‚îÄ‚îÄ service_registry.py # –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∏—Ä–∞–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ services
‚îÇ   ‚îî‚îÄ‚îÄ __init__.py         # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–µ—Ñ–∏–Ω–∏—Ü–∏–∏
‚îú‚îÄ‚îÄ utils/                  # –°–ø–æ–¥–µ–ª–µ–Ω–∏ —É—Ç–∏–ª–∏—Ç–∏  
‚îÇ   ‚îú‚îÄ‚îÄ result.py          # Result pattern implementation
‚îÇ   ‚îî‚îÄ‚îÄ decimal_utils.py   # –î–µ—Å–µ—Ç–∏—á–Ω–∏ –∫–∞–ª–∫—É–ª–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ models/                 # –ë–∞–∑–æ–≤–∏ –º–æ–¥–µ–ª–∏ –∏ mixins
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py        # –ë–∞–∑–æ–≤–∏ –º–æ–¥–µ–ª–∏
‚îÇ   ‚îî‚îÄ‚îÄ fields.py          # –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–∞–Ω–∏ decimal –ø–æ–ª–µ—Ç–∞
‚îú‚îÄ‚îÄ views.py               # –ë–∞–∑–æ–≤–∏ views
‚îî‚îÄ‚îÄ __init__.py
```

### –ü—Ä–∏–Ω—Ü–∏–ø–∏ –Ω–∞ –æ—Å–Ω–æ–≤–Ω–∏—è –¥–∏–∑–∞–π–Ω

- **üèóÔ∏è –û—Å–Ω–æ–≤–∞ –ø—ä—Ä–≤–æ** - –ü—Ä–µ–¥–æ—Å—Ç–∞–≤—è –±–∞–∑–æ–≤–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- **üîå –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å-–±–∞–∑–∏—Ä–∞–Ω** - –î–µ—Ñ–∏–Ω–∏—Ä–∞ –¥–æ–≥–æ–≤–æ—Ä–∏ –∑–∞ –≤—Å–∏—á–∫–∏ services
- **‚ö° Result Pattern** - –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–∞–Ω–æ –æ–±—Ä–∞–±–æ—Ç–≤–∞–Ω–µ –Ω–∞ –≥—Ä–µ—à–∫–∏
- **üè≠ Service Registry** - –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∏—Ä–∞–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ dependencies
- **‚ôªÔ∏è –ü—Ä–µ–∏–∑–ø–æ–ª–∑–≤–∞–µ–º–æ—Å—Ç** - –°–ø–æ–¥–µ–ª–µ–Ω–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ç–∞

---

## –û—Å–Ω–æ–≤–Ω–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

### 1. **Result Pattern** (`core/utils/result.py`)

–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–∞–Ω —Ç–∏–ø –∑–∞ –≤—Ä—ä—â–∞–Ω–µ –∑–∞ –≤—Å–∏—á–∫–∏ service –æ–ø–µ—Ä–∞—Ü–∏–∏:

```python
from core.utils.result import Result

# –°–ª—É—á–∞–π –Ω–∞ —É—Å–ø–µ—Ö
return Result.success(
    data={'document': delivery}, 
    msg='–î–æ–∫—É–º–µ–Ω—Ç—ä—Ç –µ —Å—ä–∑–¥–∞–¥–µ–Ω —É—Å–ø–µ—à–Ω–æ'
)

# –°–ª—É—á–∞–π –Ω–∞ –≥—Ä–µ—à–∫–∞
return Result.error(
    code='VALIDATION_FAILED',
    msg='–õ–∏–ø—Å–≤–∞—Ç –∑–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–∏ –ø–æ–ª–µ—Ç–∞'
)

# –ò–∑–ø–æ–ª–∑–≤–∞–Ω–µ
result = service.create_document(...)
if result.ok:
    document = result.data['document']
else:
    print(f"–ì—Ä–µ—à–∫–∞: {result.msg}")
```

**–ü—Ä–µ–¥–∏–º—Å—Ç–≤–∞:**
- ‚úÖ –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ –æ–±—Ä–∞–±–æ—Ç–≤–∞–Ω–µ –Ω–∞ –≥—Ä–µ—à–∫–∏ –≤—ä–≤ –≤—Å–∏—á–∫–∏ apps
- ‚úÖ –ë–µ–∑ –∏–∑–∫–ª—é—á–µ–Ω–∏—è –∑–∞ –Ω–µ—É—Å–ø–µ—Ö–∏ –≤ –±–∏–∑–Ω–µ—Å –ª–æ–≥–∏–∫–∞—Ç–∞
- ‚úÖ –ë–æ–≥–∞—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞ –≥—Ä–µ—à–∫–∏ —Å –∫–æ–¥–æ–≤–µ
- ‚úÖ –û–ø–µ—Ä–∞—Ü–∏–∏ –∫–æ–∏—Ç–æ –º–æ–≥–∞—Ç –¥–∞ —Å–µ —Å–≤—ä—Ä–∑–≤–∞—Ç –≤ –≤–µ—Ä–∏–≥–∞

### 2. **Service Registry** (`core/interfaces/service_registry.py`)

–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∏—Ä–∞–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ service dependencies —á—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏:

```python
from core.interfaces.service_registry import ServiceRegistry

# Resolve services –ø–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–º–µ
pricing_service = ServiceRegistry.resolve('IPricingService')
product_service = ServiceRegistry.resolve('IProductService')
inventory_service = ServiceRegistry.resolve('IInventoryService')

# –ò–∑–ø–æ–ª–∑–≤–∞–Ω–µ —Å fallback –∫—ä–º –¥–∏—Ä–µ–∫—Ç–Ω–∏ –∏–º–ø–æ—Ä—Ç–∏
try:
    pricing_service = ServiceRegistry.resolve('IPricingService')
    result = pricing_service.calculate_line_price(product, quantity)
except ImportError:
    # Fallback –∫—ä–º –¥–∏—Ä–µ–∫—Ç–µ–Ω –∏–º–ø–æ—Ä—Ç –∑–∞ backward compatibility
    from pricing.services import PricingService
    result = PricingService.calculate_line_price(product, quantity)
```

**ServiceResolverMixin –∑–∞ –ª–µ—Å–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**

```python
from core.interfaces import ServiceResolverMixin

class MyView(ServiceResolverMixin, View):
    def get(self, request):
        # –õ–µ—Å–µ–Ω –¥–æ—Å—Ç—ä–ø –¥–æ —É—Å–ª—É–≥–∏
        product_service = self.get_product_service()
        pricing_service = self.get_pricing_service()
        inventory_service = self.get_inventory_service()
        
        return JsonResponse(product_service.get_product_data())
```

**–ü—Ä–µ–¥–∏–º—Å—Ç–≤–∞:**
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∏—Ä–∞–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ service dependencies
- ‚úÖ –ö–µ—à–∏—Ä–∞–Ω–µ –Ω–∞ service instances –∑–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–Ω–æ—Å—Ç
- ‚úÖ Fallback –∫—ä–º –¥–∏—Ä–µ–∫—Ç–Ω–∏ –∏–º–ø–æ—Ä—Ç–∏ –∑–∞ backward compatibility
- ‚úÖ –õ–µ—Å–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —á—Ä–µ–∑ ServiceResolverMixin

### 3. **–ë–∞–∑–æ–≤–∏ –º–æ–¥–µ–ª–∏** (`core/models/`)

–ü—Ä–µ–¥–æ—Å—Ç–∞–≤—è –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–∏ –±–∞–∑–æ–≤–∏ –º–æ–¥–µ–ª–∏ –∫–æ–∏—Ç–æ –¥—Ä—É–≥–∏ apps –Ω–∞—Å–ª–µ–¥—è–≤–∞—Ç:

```python
# –ü—Ä–∏–º–µ—Ä –∑–∞ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ –≤ –¥—Ä—É–≥–∏ apps
from core.models import TimeStampedModel, UserTrackingModel

class Product(TimeStampedModel, UserTrackingModel):
    # –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–æ–ª—É—á–∞–≤–∞ created_at, updated_at, created_by, updated_by –ø–æ–ª–µ—Ç–∞
    name = models.CharField(max_length=200)
```

**–ù–∞–ª–∏—á–Ω–∏ –±–∞–∑–æ–≤–∏ –º–æ–¥–µ–ª–∏:**
- `TimeStampedModel` - –î–æ–±–∞–≤—è created_at, updated_at
- `UserTrackingModel` - –î–æ–±–∞–≤—è created_by, updated_by  
- `ActiveModel` - –î–æ–±–∞–≤—è is_active –ø–æ–ª–µ —Å manager

---

## –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏

–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ç–∞ **interfaces/** –¥–µ—Ñ–∏–Ω–∏—Ä–∞ –¥–æ–≥–æ–≤–æ—Ä–∏ –∑–∞ –≤—Å–∏—á–∫–∏ –æ—Å–Ω–æ–≤–Ω–∏ services:

### –ù–∞–ª–∏—á–Ω–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏

| –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å | –¶–µ–ª | –ò–∑–ø–æ–ª–∑–≤–∞–Ω –æ—Ç |
|-----------|-----|-------------|
| `IDocumentService` | –î–æ–∫—É–º–µ–Ω—Ç–Ω–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ | nomenclatures, purchases |
| `IInventoryService` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å–∫–ª–∞–¥–∞ | inventory app |
| `IMovementService` | –°–∫–ª–∞–¥–æ–≤–∏ –¥–≤–∏–∂–µ–Ω–∏—è | inventory app |
| `IPricingService` | –¶–µ–Ω–æ–≤–∏ –∫–∞–ª–∫—É–ª–∞—Ü–∏–∏ | pricing app |
| `IVATCalculationService` | –î–î–° –∏–∑—á–∏—Å–ª–µ–Ω–∏—è | nomenclatures |
| `ISupplierService` | –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –¥–æ—Å—Ç–∞–≤—á–∏—Ü–∏ | partners app |
| `IProductService` | –ü—Ä–æ–¥—É–∫—Ç–æ–≤–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ | products app |
| `ILocation` | –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∑–∞ –ª–æ–∫–∞—Ü–∏–∏ | inventory, pricing |

### –ü—Ä–∏–º–µ—Ä –∑–∞ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ –Ω–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

```python
from core.interfaces import IDocumentService

class MyDocumentService(IDocumentService):
    def create_document(self, model_class, data, user, location) -> Result:
        # –ò–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è —Ç—É–∫
        pass
        
    def transition_document(self, document, to_status, user, comments) -> Result:
        # –ò–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è —Ç—É–∫
        pass
```

**–ü—Ä–µ–¥–∏–º—Å—Ç–≤–∞:**
- ‚úÖ –ü—Ä–∏–ª–∞–≥–∞ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–µ–Ω API –≤ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏–∏—Ç–µ
- ‚úÖ –ü—Ä–∞–≤–∏ —Ç–µ—Å—Ç–≤–∞–Ω–µ—Ç–æ –ø–æ-–ª–µ—Å–Ω–æ —Å mock-–æ–≤–µ
- ‚úÖ –Ø—Å–Ω–∏ –¥–æ–≥–æ–≤–æ—Ä–∏ –º–µ–∂–¥—É apps
- ‚úÖ IDE –ø–æ–¥–¥—Ä—ä–∂–∫–∞ —Å type hints

---

## Service Registry

### –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∏—Ä–∞–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ services

Service Registry –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∏—Ä–∞–Ω–æ resolve-–≤–∞–Ω–µ –Ω–∞ services —á—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–º–µ–Ω–∞:

```python
from core.interfaces.service_registry import ServiceRegistry

# Resolve –ø–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–º–µ
pricing_service = ServiceRegistry.resolve('IPricingService')
result = pricing_service.calculate_line_price(product, quantity)

# Resolve —Å fallback
inventory_service = ServiceRegistry.resolve('IInventoryService')
if inventory_service:
    result = inventory_service.get_stock_level(product, location)
```

### ServiceResolverMixin

Mixin –∫–æ–π—Ç–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—è –ª–µ—Å–µ–Ω –¥–æ—Å—Ç—ä–ø –¥–æ services:

```python
from core.interfaces import ServiceResolverMixin

class DeliveryReceiptView(ServiceResolverMixin, View):
    def get_queryset(self):
        # –õ–µ—Å–µ–Ω –¥–æ—Å—Ç—ä–ø –¥–æ services
        inventory_service = self.get_inventory_service()
        return inventory_service.filter_delivery_receipts(...)
    
    def post(self, request):
        product_service = self.get_product_service()
        product = product_service.get_by_id(request.data['product_id'])
        
        pricing_service = self.get_pricing_service() 
        price = pricing_service.calculate_price(product, quantity)
```

**–ù–∞–ª–∏—á–Ω–∏ –º–µ—Ç–æ–¥–∏ –≤ ServiceResolverMixin:**
- `get_product_service()` - IProductService
- `get_pricing_service()` - IPricingService
- `get_inventory_service()` - IInventoryService
- `get_document_service()` - IDocumentService

---

## –£—Ç–∏–ª–∏—Ç–∏

### 1. **Result Pattern** (`utils/result.py`)

–í–∏–∂—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–æ—Ç–æ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ-–≥–æ—Ä–µ –≤ –æ—Å–Ω–æ–≤–Ω–∏—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏.

### 2. **–î–µ—Å–µ—Ç–∏—á–Ω–∏ —É—Ç–∏–ª–∏—Ç–∏** (`utils/decimal_utils.py`)

–°–æ—Ñ–∏—Å—Ç–∏—Ü–∏—Ä–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∑–∞ –¥–µ—Å–µ—Ç–∏—á–Ω–∞ —Ç–æ—á–Ω–æ—Å—Ç —Å—ä–æ–±—Ä–∞–∑–µ–Ω–∞ —Å –±—ä–ª–≥–∞—Ä—Å–∫–æ—Ç–æ –¥–∞–Ω—ä—á–Ω–æ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—Å—Ç–≤–æ:

```python
from core.utils.decimal_utils import (
    round_currency,      # 2 –¥–µ—Å–µ—Ç–∏—á–Ω–∏ –º–µ—Å—Ç–∞ –∑–∞ –¥–∏—Å–ø–ª–µ–π
    round_cost_price,    # 4 –¥–µ—Å–µ—Ç–∏—á–Ω–∏ –º–µ—Å—Ç–∞ –∑–∞ –∫–∞–ª–∫—É–ª–∞—Ü–∏–∏
    round_vat_amount,    # 2 –¥–µ—Å–µ—Ç–∏—á–Ω–∏ –º–µ—Å—Ç–∞ –∑–∞ –î–î–°
    round_tax_base,      # 2 –¥–µ—Å–µ—Ç–∏—á–Ω–∏ –º–µ—Å—Ç–∞ –∑–∞ –¥–∞–Ω—ä—á–Ω–∞ –æ—Å–Ω–æ–≤–∞
    round_quantity       # 3 –¥–µ—Å–µ—Ç–∏—á–Ω–∏ –º–µ—Å—Ç–∞ –∑–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
)

# –ó–∞ –¥–∏—Å–ø–ª–µ–π/—Å—ä—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ü–µ–Ω–∏
display_price = round_currency(calculation_result)

# –ó–∞ –≤—ä—Ç—Ä–µ—à–Ω–∏ —Å–µ–±–µ—Å—Ç–æ–π–Ω–æ—Å—Ç–Ω–∏ –∫–∞–ª–∫—É–ª–∞—Ü–∏–∏
batch_cost = round_cost_price(batch.cost_price)

# –ó–∞ –î–î–° —Å—É–º–∏
vat_amount = round_vat_amount(net_amount * vat_rate)

# –ó–∞ –¥–∞–Ω—ä—á–Ω–∞ –æ—Å–Ω–æ–≤–∞
tax_base = round_tax_base(net_amount)

# –ó–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ (–ø–æ–¥–¥—ä—Ä–∂–∞ –≥—Ä–∞–º–æ–≤–µ/ml)
quantity = round_quantity(Decimal('10.567'))  # ‚Üí 10.567
```

**–ö–ª—é—á–æ–≤–∏ –ø—Ä–∏–Ω—Ü–∏–ø–∏:**
- **–í–∞–ª—É—Ç–Ω–∏ —Å—É–º–∏**: 2dp –∑–∞ –¥–∏—Å–ø–ª–µ–π –∏ —Å—ä—Ö—Ä–∞–Ω–µ–Ω–∏–µ
- **–°–µ–±–µ—Å—Ç–æ–π–Ω–æ—Å—Ç–∏**: 4dp –∑–∞ —Ç–æ—á–Ω–∏ –∫–∞–ª–∫—É–ª–∞—Ü–∏–∏
- **–î–î–° —Å—É–º–∏**: 2dp —Å—ä–≥–ª–∞—Å–Ω–æ –¥–∞–Ω—ä—á–Ω–æ—Ç–æ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—Å—Ç–≤–æ
- **–î–∞–Ω—ä—á–Ω–∞ –æ—Å–Ω–æ–≤–∞**: 2dp —Å—ä–≥–ª–∞—Å–Ω–æ –¥–∞–Ω—ä—á–Ω–æ—Ç–æ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—Å—Ç–≤–æ
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–∞**: 3dp –∑–∞ –ø–æ–¥–¥—Ä—ä–∂–∫–∞ –Ω–∞ –≥—Ä–∞–º–æ–≤–µ/ml

---

## –ú–æ–¥–µ–ª–∏

### –ü—Ä–∏–º–µ—Ä–∏ –∑–∞ –±–∞–∑–æ–≤–∏ –º–æ–¥–µ–ª–∏

```python
# core/models.py
from django.db import models
from django.contrib.auth import get_user_model

User = get_user_model()

class TimeStampedModel(models.Model):
    """–ë–∞–∑–æ–≤ –º–æ–¥–µ–ª —Å—ä—Å —Å–ª–µ–¥–µ–Ω–µ –Ω–∞ timestamps"""
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)
    
    class Meta:
        abstract = True

class UserTrackingModel(TimeStampedModel):
    """–ë–∞–∑–æ–≤ –º–æ–¥–µ–ª —Å—ä—Å —Å–ª–µ–¥–µ–Ω–µ –Ω–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏"""
    created_by = models.ForeignKey(
        User, on_delete=models.PROTECT, 
        related_name='+', verbose_name='–°—ä–∑–¥–∞–¥–µ–Ω –æ—Ç'
    )
    updated_by = models.ForeignKey(
        User, on_delete=models.PROTECT, 
        related_name='+', null=True, verbose_name='–ê–∫—Ç—É–∞–ª–∏–∑–∏—Ä–∞–Ω –æ—Ç'
    )
    
    class Meta:
        abstract = True

class ActiveModel(models.Model):
    """–ë–∞–∑–æ–≤ –º–æ–¥–µ–ª —Å –∞–∫—Ç–∏–≤–Ω–∞/–Ω–µ–∞–∫—Ç–∏–≤–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç"""
    is_active = models.BooleanField(default=True, verbose_name='–ê–∫—Ç–∏–≤–µ–Ω')
    
    objects = models.Manager()  # –ü–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ manager
    active_objects = ActiveManager()  # –°–∞–º–æ –∞–∫—Ç–∏–≤–Ω–∏ –∑–∞–ø–∏—Å–∏
    
    class Meta:
        abstract = True
```

---

## –ú–æ–¥–µ–ª–∏ –∑–∞ –ø–æ–ª–µ—Ç–∞

### –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–∞–Ω–∏ decimal –ø–æ–ª–µ—Ç–∞ (`core/models/fields.py`)

–°–∏—Å—Ç–µ–º–∞—Ç–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–∞–Ω–∏ decimal –ø–æ–ª–µ—Ç–∞ –∫–æ–∏—Ç–æ –ø—Ä–∏–ª–∞–≥–∞—Ç –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–∞ —Ç–æ—á–Ω–æ—Å—Ç:

```python
from core.models.fields import CurrencyField, CostPriceField, QuantityField

class MyModel(models.Model):
    # –í–∞–ª—É—Ç–Ω–∏ –ø–æ–ª–µ—Ç–∞ (2dp, –ø—Ä–∞–≤–∏–ª–Ω–æ –∑–∞–∫—Ä—ä–≥–ª—è–≤–∞–Ω–µ)
    price = CurrencyField(verbose_name='–¶–µ–Ω–∞')
    total = CurrencyField(verbose_name='–û–±—â–æ')
    
    # –°–µ–±–µ—Å—Ç–æ–π–Ω–æ—Å—Ç–Ω–∏ –ø–æ–ª–µ—Ç–∞ (4dp, –∫–∞–ª–∫—É–ª–∞—Ü–∏–æ–Ω–Ω–∞ —Ç–æ—á–Ω–æ—Å—Ç)
    cost = CostPriceField(verbose_name='–°–µ–±–µ—Å—Ç–æ–π–Ω–æ—Å—Ç')
    avg_cost = CostPriceField(verbose_name='–°—Ä–µ–¥–Ω–∞ —Å–µ–±–µ—Å—Ç–æ–π–Ω–æ—Å—Ç')
    
    # –ö–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–∏ –ø–æ–ª–µ—Ç–∞ (3dp, –ø–æ–¥–¥—ä—Ä–∂–∞ –≥—Ä–∞–º–æ–≤–µ/ml)
    quantity = QuantityField(verbose_name='–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ')
    received_qty = QuantityField(verbose_name='–ü–æ–ª—É—á–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ')
```

**Field —Ç–∏–ø–æ–≤–µ:**

| Field —Ç–∏–ø | Decimal Places | –ò–∑–ø–æ–ª–∑–≤–∞–Ω–µ |
|-----------|---------------|------------|
| `CurrencyField` | 2 | –¶–µ–Ω–∏ –∑–∞ –¥–∏—Å–ø–ª–µ–π, —Ñ–∞–∫—Ç—É—Ä–∏—Ä–∞–Ω–µ |
| `CostPriceField` | 4 | –°–µ–±–µ—Å—Ç–æ–π–Ω–æ—Å—Ç–∏, –∫–∞–ª–∫—É–ª–∞—Ü–∏–∏ |
| `VATAmountField` | 2 | –î–î–° —Å—É–º–∏ |
| `TaxBaseField` | 2 | –î–∞–Ω—ä—á–Ω–∞ –æ—Å–Ω–æ–≤–∞ |
| `QuantityField` | 3 | –ö–æ–ª–∏—á–µ—Å—Ç–≤–∞ (–ø–æ–¥–¥—ä—Ä–∂–∞ –≥—Ä–∞–º–æ–≤–µ) |

**–ü—Ä–µ–¥–∏–º—Å—Ç–≤–∞:**
- ‚úÖ –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–∞ —Ç–æ—á–Ω–æ—Å—Ç –≤ —Ü—è–ª–∞—Ç–∞ —Å–∏—Å—Ç–µ–º–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∞–≤–∏–ª–Ω–æ –∑–∞–∫—Ä—ä–≥–ª—è–≤–∞–Ω–µ
- ‚úÖ –°—ä–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å –±—ä–ª–≥–∞—Ä—Å–∫–æ—Ç–æ –¥–∞–Ω—ä—á–Ω–æ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—Å—Ç–≤–æ
- ‚úÖ –ü–æ–¥—Ö–æ–¥—è—â–∏ –∑–∞ financial –∫–∞–ª–∫—É–ª–∞—Ü–∏–∏

---

## –î–µ—Å–µ—Ç–∏—á–Ω–∞ —Ç–æ—á–Ω–æ—Å—Ç

### –°–∏—Å—Ç–µ–º –∑–∞ —Ç–æ—á–Ω–æ—Å—Ç

OptimaPOS –∏–º–∞ —Å–æ—Ñ–∏—Å—Ç–∏—Ü–∏—Ä–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∑–∞ –¥–µ—Å–µ—Ç–∏—á–Ω–∞ —Ç–æ—á–Ω–æ—Å—Ç:

```python
from core.utils.decimal_utils import *

# –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏ —Ç–æ—á–Ω–æ—Å—Ç–∏:
# - –í–∞–ª—É—Ç–∏: 2dp (24.99)
# - –°–µ–±–µ—Å—Ç–æ–π–Ω–æ—Å—Ç–∏: 4dp (15.2567) - –∑–∞ —Ç–æ—á–Ω–∏ –∫–∞–ª–∫—É–ª–∞—Ü–∏–∏
# - –ö–æ–ª–∏—á–µ—Å—Ç–≤–∞: 3dp (10.567) - –ø–æ–¥–¥—ä—Ä–∂–∞ –≥—Ä–∞–º–æ–≤–µ/ml
# - –î–î–°: 2dp (4.80) - –¥–∞–Ω—ä—á–Ω–æ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—Å—Ç–≤–æ
```

### –ü—Ä–∞–≤–∏–ª–∞ –∑–∞ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ

```python
# ‚úÖ –ü–†–ê–í–ò–õ–ù–û - –ò–∑–ø–æ–ª–∑–≤–∞–π –ø–æ–¥—Ö–æ–¥—è—â–∞—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è
from core.utils.decimal_utils import round_currency, round_cost_price

# –ó–∞ —Ü–µ–Ω–∏ –∫–æ–∏—Ç–æ —Å–µ –ø–æ–∫–∞–∑–≤–∞—Ç –Ω–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è
display_price = round_currency(Decimal('24.9876'))  # ‚Üí 24.99

# –ó–∞ –≤—ä—Ç—Ä–µ—à–Ω–∏ –∫–∞–ª–∫—É–ª–∞—Ü–∏–∏
internal_cost = round_cost_price(Decimal('15.256789'))  # ‚Üí 15.2568

# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–ù–û - –î–∏—Ä–µ–∫—Ç–Ω–æ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ –Ω–∞ round()
price = round(Decimal('24.9876'), 2)  # –ù–µ –∏–∑–ø–æ–ª–∑–≤–∞ –ø—Ä–∞–≤–∏–ª–Ω–∏—Ç–µ rules
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–æ–ª–µ—Ç–∞

```python
# –ü–æ–ª–µ—Ç–∞—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∏–ª–∞–≥–∞—Ç –ø—Ä–∞–≤–∏–ª–Ω–∞—Ç–∞ —Ç–æ—á–Ω–æ—Å—Ç
class ProductPrice(models.Model):
    # –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ 2dp —Å –ø—Ä–∞–≤–∏–ª–Ω–æ –∑–∞–∫—Ä—ä–≥–ª—è–≤–∞–Ω–µ
    selling_price = CurrencyField()
    
    # –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ 4dp –∑–∞ –∫–∞–ª–∫—É–ª–∞—Ü–∏–æ–Ω–Ω–∞ —Ç–æ—á–Ω–æ—Å—Ç  
    cost_price = CostPriceField()
    
    def save(self, *args, **kwargs):
        # –ü–æ–ª–µ—Ç–∞—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–∫—Ä—ä–≥–ª—è–≤–∞—Ç —Å—Ç–æ–π–Ω–æ—Å—Ç–∏—Ç–µ
        super().save(*args, **kwargs)
```

---

## –®–∞–±–ª–æ–Ω–∏ –∑–∞ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ

### 1. **Service Implementation Pattern**

```python
from core.interfaces import IDocumentService
from core.utils.result import Result
from core.interfaces.service_registry import ServiceRegistry

class MyService(IDocumentService):
    def create_document(self, model_class, data, user, location) -> Result:
        try:
            # –ò–∑–ø–æ–ª–∑–≤–∞–π –¥—Ä—É–≥–∏ services —á—Ä–µ–∑ Service Registry
            pricing_service = ServiceRegistry.resolve('IPricingService')
            
            # –ë–∏–∑–Ω–µ—Å –ª–æ–≥–∏–∫–∞ —Ç—É–∫
            document = model_class.objects.create(**data)
            return Result.success(data={'document': document})
        except Exception as e:
            return Result.error('CREATION_FAILED', str(e))
```

### 2. **Result Handling Pattern**

```python
# –í views –∏–ª–∏ –¥—Ä—É–≥–∏ services
def my_view(request):
    service = MyService()
    result = service.create_document(...)
    
    if result.ok:
        # –ü—ä—Ç –Ω–∞ —É—Å–ø–µ—Ö
        return JsonResponse({
            'success': True,
            'data': result.data
        })
    else:
        # –ü—ä—Ç –Ω–∞ –≥—Ä–µ—à–∫–∞
        return JsonResponse({
            'success': False,
            'error': result.msg,
            'code': result.code
        }, status=400)
```

### 3. **Base Model Inheritance**

```python
# –í –≤—Å—è–∫–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
from core.models import TimeStampedModel, UserTrackingModel
from core.models.fields import CurrencyField, QuantityField

class MyModel(TimeStampedModel, UserTrackingModel):
    """–ü–æ–ª—É—á–∞–≤–∞ timestamp –∏ user tracking –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ"""
    name = models.CharField(max_length=100)
    price = CurrencyField()  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ 2dp —Ç–æ—á–Ω–æ—Å—Ç
    quantity = QuantityField()  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ 3dp —Ç–æ—á–Ω–æ—Å—Ç
    
    def save(self, *args, **kwargs):
        # Custom save –ª–æ–≥–∏–∫–∞
        super().save(*args, **kwargs)
```

### 4. **ServiceResolverMixin Pattern**

```python
from core.interfaces import ServiceResolverMixin

class MyView(ServiceResolverMixin, View):
    def get(self, request):
        # –õ–µ—Å–µ–Ω –¥–æ—Å—Ç—ä–ø –¥–æ services
        product_service = self.get_product_service()
        pricing_service = self.get_pricing_service()
        
        # –ò–∑–ø–æ–ª–∑–≤–∞–π services
        product = product_service.get_by_id(product_id)
        price = pricing_service.calculate_price(product, quantity)
        
        return JsonResponse({
            'product': product.name,
            'price': str(price)
        })
```

---

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–∏ —Ç–æ—á–∫–∏

### –ö–∞–∫ –¥—Ä—É–≥–∏—Ç–µ Apps –∏–∑–ø–æ–ª–∑–≤–∞—Ç CORE

**NOMENCLATURES App:**
- –ù–∞—Å–ª–µ–¥—è–≤–∞ –æ—Ç –±–∞–∑–æ–≤–∏ –º–æ–¥–µ–ª–∏ –∑–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∏
- –ò–∑–ø–æ–ª–∑–≤–∞ `Result` pattern –∑–∞ –≤—Å–∏—á–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–∞ —Å–µ —á—Ä–µ–∑ Service Registry
- –ò–∑–ø–æ–ª–∑–≤–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–∞–Ω–∏ decimal –ø–æ–ª–µ—Ç–∞

**PURCHASES App:**  
- –ò–∑–ø–æ–ª–∑–≤–∞ ServiceResolverMixin –∑–∞ –¥–æ—Å—Ç—ä–ø –¥–æ —É—Å–ª—É–≥–∏
- –ù–∞—Å–ª–µ–¥—è–≤–∞ –±–∞–∑–æ–≤–∏ –º–æ–¥–µ–ª–∏ –∑–∞ purchase –¥–æ–∫—É–º–µ–Ω—Ç–∏
- –î–µ–ª–µ–≥–∏—Ä–∞ –∫—ä–º nomenclatures services —á—Ä–µ–∑ Service Registry

**INVENTORY App:**
- –ò–º–ø–ª–µ–º–µ–Ω—Ç–∏—Ä–∞ `IInventoryService` –∏ `IMovementService`
- –ò–∑–ø–æ–ª–∑–≤–∞ `Result` pattern –∑–∞ movement –æ–ø–µ—Ä–∞—Ü–∏–∏
- –ò–∑–ø–æ–ª–∑–≤–∞ CostPriceField –∑–∞ —Ç–æ—á–Ω–∏ –∫–∞–ª–∫—É–ª–∞—Ü–∏–∏
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–∞ —Å–µ —á—Ä–µ–∑ Service Registry

**PRICING App:**
- –ò–º–ø–ª–µ–º–µ–Ω—Ç–∏—Ä–∞ `IPricingService`
- –ò–∑–ø–æ–ª–∑–≤–∞ `Result` –∑–∞ price –∫–∞–ª–∫—É–ª–∞—Ü–∏–∏
- –ò–∑–ø–æ–ª–∑–≤–∞ –¥–µ—Å–µ—Ç–∏—á–Ω–∏ —É—Ç–∏–ª–∏—Ç–∏ –∑–∞ –ø—Ä–∞–≤–∏–ª–Ω–æ –∑–∞–∫—Ä—ä–≥–ª—è–≤–∞–Ω–µ
- –†–µ–≥–∏—Å—Ç—Ä–∏—Ä–∞ —Å–µ –≤ Service Registry

**PARTNERS App:**
- –ò–∑–ø–æ–ª–∑–≤–∞ –±–∞–∑–æ–≤–∏ –º–æ–¥–µ–ª–∏ –∑–∞ suppliers/customers
- `Result` pattern –∑–∞ partner –æ–ø–µ—Ä–∞—Ü–∏–∏
- ServiceResolverMixin –≤ views

---

## –ù–∞–π-–¥–æ–±—Ä–∏ –ø—Ä–∞–∫—Ç–∏–∫–∏

### 1. **–í–∏–Ω–∞–≥–∏ –∏–∑–ø–æ–ª–∑–≤–∞–π Result Pattern**
```python
# ‚úÖ –î–æ–±—Ä–æ
def create_something() -> Result:
    if validation_fails:
        return Result.error('VALIDATION_FAILED', '–î–µ—Ç–∞–π–ª–∏ —Ç—É–∫')
    return Result.success(data={'item': item})

# ‚ùå –ò–∑–±—è–≥–≤–∞–π
def create_something():
    if validation_fails:
        raise ValidationError('–î–µ—Ç–∞–π–ª–∏ —Ç—É–∫')  # –ù–µ –∏–∑–ø–æ–ª–∑–≤–∞–π exceptions –∑–∞ –±–∏–∑–Ω–µ—Å –ª–æ–≥–∏–∫–∞
```

### 2. **–ò–∑–ø–æ–ª–∑–≤–∞–π Service Registry**
```python
# ‚úÖ –î–æ–±—Ä–æ - –∏–∑–ø–æ–ª–∑–≤–∞–π Service Registry  
from core.interfaces.service_registry import ServiceRegistry

pricing_service = ServiceRegistry.resolve('IPricingService')
result = pricing_service.calculate_price(product, quantity)

# ‚ùå –ò–∑–±—è–≥–≤–∞–π - –¥–∏—Ä–µ–∫—Ç–Ω–∏ –∏–º–ø–æ—Ä—Ç–∏ –∫—ä–¥–µ—Ç–æ –µ –≤—ä–∑–º–æ–∂–Ω–æ
from pricing.services import PricingService  # –ò–∑–ø–æ–ª–∑–≤–∞–π —Å–∞–º–æ –∑–∞ fallback
```

### 3. **–ò–∑–ø–æ–ª–∑–≤–∞–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–∞–Ω–∏ –ø–æ–ª–µ—Ç–∞**
```python
# ‚úÖ –î–æ–±—Ä–æ
from core.models.fields import CurrencyField, QuantityField

class Product(models.Model):
    price = CurrencyField()  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∞–≤–∏–ª–Ω–∞ —Ç–æ—á–Ω–æ—Å—Ç
    quantity = QuantityField()  # –ü–æ–¥–¥—ä—Ä–∂–∞ –≥—Ä–∞–º–æ–≤–µ/ml

# ‚ùå –ò–∑–±—è–≥–≤–∞–π
class Product(models.Model):
    price = models.DecimalField(max_digits=10, decimal_places=2)  # –†—ä—á–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```

### 4. **–ò–∑–ø–æ–ª–∑–≤–∞–π –¥–µ—Å–µ—Ç–∏—á–Ω–∏ —É—Ç–∏–ª–∏—Ç–∏**
```python
# ‚úÖ –î–æ–±—Ä–æ
from core.utils.decimal_utils import round_currency, round_cost_price

display_price = round_currency(calculation_result)
internal_cost = round_cost_price(batch_cost)

# ‚ùå –ò–∑–±—è–≥–≤–∞–π
display_price = round(calculation_result, 2)  # –ù–µ —Å–ª–µ–¥–≤–∞ –ø—Ä–∞–≤–∏–ª–∞—Ç–∞
```

### 5. **ServiceResolverMixin –≤ Views**
```python
# ‚úÖ –î–æ–±—Ä–æ
from core.interfaces import ServiceResolverMixin

class MyView(ServiceResolverMixin, View):
    def get(self, request):
        service = self.get_pricing_service()  # –õ–µ—Å–µ–Ω –¥–æ—Å—Ç—ä–ø
        return JsonResponse(service.get_data())

# ‚ùå –ò–∑–±—è–≥–≤–∞–π - —Ä—ä—á–Ω–æ resolve-–≤–∞–Ω–µ –≤ –≤—Å–µ–∫–∏ view
class MyView(View):
    def get(self, request):
        service = ServiceRegistry.resolve('IPricingService')  # –ü–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ
```

---

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

**CORE app –∑–∞–≤–∏—Å–∏ –æ—Ç:**
- Django framework —Å–∞–º–æ
- –ù—è–º–∞ –¥—Ä—É–≥–∏ OptimaPOS apps

**–î—Ä—É–≥–∏ apps –∑–∞–≤–∏—Å—è—Ç –æ—Ç CORE:**
- –í–°–ò–ß–ö–ò –¥—Ä—É–≥–∏ OptimaPOS apps –∏–º–ø–æ—Ä—Ç–∏—Ä–∞—Ç –æ—Ç CORE
- CORE —Ç—Ä—è–±–≤–∞ –¥–∞ –µ –≤ INSTALLED_APPS –ø—Ä–µ–¥–∏ –¥—Ä—É–≥–∏—Ç–µ custom apps

---

## –¢–µ—Å—Ç–≤–∞–Ω–µ

```python
# –ü—Ä–∏–º–µ—Ä –∑–∞ —Ç–µ—Å—Ç –∏–∑–ø–æ–ª–∑–≤–∞–π–∫–∏ CORE –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏
from core.utils.result import Result
from core.interfaces import IDocumentService
from core.interfaces.service_registry import ServiceRegistry

class TestDocumentService(IDocumentService):
    """Mock implementation –∑–∞ —Ç–µ—Å—Ç–≤–∞–Ω–µ"""
    def create_document(self, *args, **kwargs):
        return Result.success(data={'document': 'mock_doc'})

def test_service_registry():
    # Test Service Registry resolve
    service = ServiceRegistry.resolve('IDocumentService')
    result = service.create_document()
    assert result.ok
    assert result.data['document'] == 'mock_doc'

def test_decimal_utils():
    from core.utils.decimal_utils import round_currency
    result = round_currency(Decimal('24.9876'))
    assert result == Decimal('24.99')
```

---

## –ò—Å—Ç–æ—Ä–∏—è –Ω–∞ –≤–µ—Ä—Å–∏–∏—Ç–µ

- **v1.0** - –ü—ä—Ä–≤–æ–Ω–∞—á–∞–ª–µ–Ω CORE app —Å –æ—Å–Ω–æ–≤–Ω–∏ —É—Ç–∏–ª–∏—Ç–∏
- **v1.5** - –î–æ–±–∞–≤–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏  
- **v2.0** - Result pattern –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è
- **v2.1** - –ü–æ–¥–æ–±—Ä–µ–Ω–∏ –±–∞–∑–æ–≤–∏ –º–æ–¥–µ–ª–∏
- **v3.0** - Service Registry Pattern, —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–∞–Ω–∏ –ø–æ–ª–µ—Ç–∞, –¥–µ—Å–µ—Ç–∏—á–Ω–∞ —Ç–æ—á–Ω–æ—Å—Ç

---

*–ü–æ—Å–ª–µ–¥–Ω–∞ –∞–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è: 2025-09-05*  
*–í–µ—Ä—Å–∏—è: 3.0*  
*–ê–∫—Ç—É–∞–ª–∏–∑–∏—Ä–∞–Ω–æ —Å–ø–æ—Ä–µ–¥ –∞–∫—Ç—É–∞–ª–Ω–∏—è –∫–æ–¥*