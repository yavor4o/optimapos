{% extends 'frontend/base.html' %}
{% load i18n %}

{% block title %}{{ page_title }} - {{ block.super }}{% endblock %}

{% block content %}
<div class="kt-container-fixed">

    <!-- Page Header -->
    <div class="flex flex-wrap items-center lg:items-end justify-between gap-5 pb-7.5">
        <div class="flex flex-col justify-center gap-2">
            <h1 class="text-xl font-medium leading-none text-mono">
                {{ page_title }}
            </h1>
            <div class="flex items-center gap-2 text-sm font-normal text-secondary-foreground">
                <a href="{% url 'nomenclatures:brands' %}" class="hover:text-primary">{% trans "Brands" %}</a>
                <i class="ki-filled ki-right text-xs"></i>
                <span>{{ object.name|default:_("New Brand") }}</span>
            </div>
        </div>
    </div>

    <!-- Form Card -->
    <div class="kt-card">
        <div class="kt-card-header">
            <h3 class="kt-card-title">
                {% trans "Brand Information" %}
            </h3>
        </div>

        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}

            <div class="kt-card-body mb-3 mt-3">
                <!-- Error Messages -->
                {% if form.non_field_errors %}
                <div style="padding: 12px; background-color: #fee2e2; border: 1px solid #fecaca; border-radius: 6px; margin-bottom: 20px;">
                    <div style="color: #dc2626; font-weight: 500;">{% trans "Please correct the errors below:" %}</div>
                    {{ form.non_field_errors }}
                </div>
                {% endif %}

                <!-- Form Fields -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; padding: 0 20px;">

                    <!-- Code Field -->
                    <div>
                        <label class="kt-label" style="margin-bottom: 8px; display: block; font-size: 13px; font-weight: 500; color: #374151;">
                            {{ form.code.label }}
                            {% if form.code.field.required %}<span style="color: #dc2626;">*</span>{% endif %}
                        </label>
                        <input type="text"
                               name="code"
                               value="{{ form.code.value|default:'' }}"
                               class="kt-input"
                               style="width: 100%; padding: 8px 12px; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;"
                               placeholder="{% trans 'e.g., COCA, PEPSI' %}"
                               {% if form.code.field.required %}required{% endif %}>
                        {% if form.code.help_text %}
                            <div style="font-size: 12px; color: #6b7280; margin-top: 4px;">
                                {{ form.code.help_text }}
                            </div>
                        {% endif %}
                        {% if form.code.errors %}
                            <div style="font-size: 12px; color: #dc2626; margin-top: 4px;">
                                {{ form.code.errors.0 }}
                            </div>
                        {% endif %}
                    </div>

                    <!-- Name Field -->
                    <div>
                        <label class="kt-label" style="margin-bottom: 8px; display: block; font-size: 13px; font-weight: 500; color: #374151;">
                            {{ form.name.label }}
                            {% if form.name.field.required %}<span style="color: #dc2626;">*</span>{% endif %}
                        </label>
                        <input type="text"
                               name="name"
                               value="{{ form.name.value|default:'' }}"
                               class="kt-input"
                               style="width: 100%; padding: 8px 12px; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;"
                               placeholder="{% trans 'e.g., Coca-Cola, Pepsi' %}"
                               {% if form.name.field.required %}required{% endif %}>
                        {% if form.name.help_text %}
                            <div style="font-size: 12px; color: #6b7280; margin-top: 4px;">
                                {{ form.name.help_text }}
                            </div>
                        {% endif %}
                        {% if form.name.errors %}
                            <div style="font-size: 12px; color: #dc2626; margin-top: 4px;">
                                {{ form.name.errors.0 }}
                            </div>
                        {% endif %}
                    </div>

                    <!-- Website Field -->
                    <div>
                        <label class="kt-label" style="margin-bottom: 8px; display: block; font-size: 13px; font-weight: 500; color: #374151;">
                            {{ form.website.label }}
                        </label>
                        <input type="url"
                               name="website"
                               value="{{ form.website.value|default:'' }}"
                               class="kt-input"
                               style="width: 100%; padding: 8px 12px; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;"
                               placeholder="https://example.com">
                        {% if form.website.help_text %}
                            <div style="font-size: 12px; color: #6b7280; margin-top: 4px;">
                                {{ form.website.help_text }}
                            </div>
                        {% endif %}
                        {% if form.website.errors %}
                            <div style="font-size: 12px; color: #dc2626; margin-top: 4px;">
                                {{ form.website.errors.0 }}
                            </div>
                        {% endif %}
                    </div>

                    <!-- Logo Field -->
                    <div>
                        <label class="kt-label" style="margin-bottom: 8px; display: block; font-size: 13px; font-weight: 500; color: #374151;">
                            {{ form.logo.label }}
                        </label>

                        {% if object and object.logo %}
                        <div style="margin-bottom: 12px;">
                            <div style="width: 80px; height: 80px; border: 1px solid #e5e7eb; border-radius: 6px; padding: 8px;">
                                <img src="{{ object.logo.url }}"
                                     alt="{{ object.name }}"
                                     style="width: 100%; height: 100%; object-fit: contain;">
                            </div>
                            <div style="font-size: 12px; color: #6b7280; margin-top: 4px;">
                                {% trans "Current logo" %}
                            </div>
                        </div>
                        {% endif %}

                        <input type="file"
                               name="logo"
                               class="kt-input"
                               style="width: 100%; padding: 8px 12px; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 14px;"
                               accept="image/*">
                        {% if form.logo.help_text %}
                            <div style="font-size: 12px; color: #6b7280; margin-top: 4px;">
                                {{ form.logo.help_text }}
                            </div>
                        {% endif %}
                        {% if form.logo.errors %}
                            <div style="font-size: 12px; color: #dc2626; margin-top: 4px;">
                                {{ form.logo.errors.0 }}
                            </div>
                        {% endif %}
                    </div>

                    <!-- Status Field -->
                    <div style="grid-column: span 2;">
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; font-size: 14px;">
                            <input type="checkbox"
                                   name="is_active"
                                   class="kt-checkbox"
                                   style="width: 18px; height: 18px; border-radius: 4px;"
                                   {% if form.is_active.value %}checked{% endif %}>
                            <span style="color: #374151; font-weight: 500;">{{ form.is_active.label }}</span>
                        </label>
                        {% if form.is_active.errors %}
                            <div style="font-size: 12px; color: #dc2626; margin-top: 4px;">
                                {{ form.is_active.errors.0 }}
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Form Actions -->
            <div class="kt-card-footer">
                <div style="display: flex; justify-content: flex-end; gap: 8px;">
                    <a href="{% url 'nomenclatures:brands' %}" class="kt-btn kt-btn-light">
                        {% trans "Cancel" %}
                    </a>
                    <button type="submit" class="kt-btn kt-btn-primary">
                        <i class="ki-filled ki-check"></i>
                        {% if object %}
                            {% trans "Update Brand" %}
                        {% else %}
                            {% trans "Create Brand" %}
                        {% endif %}
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>
{% endblock %}